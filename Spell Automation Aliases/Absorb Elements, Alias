!alias absorb embed {{a,i,c,H,EL,AB,N,HP=argparse(&ARGS&),'-i' in &ARGS&,combat(),f'!absorb [-d dmg] [-type type] [-l level] [-i] [-t NPC]',"Absorb Elements","Abjuration" not in get('subclass',''),name,hp_str}}{{S,d,t,h,ta,m,th,se=a.last('l',1,int),int(a.last('d',1,int)),a.last('type') if a.last('type') else None,"help" in a or "?" in a,a.last("t"),a.last("max"),get_temphp(),set_temphp}}{{cast,ta=get_slots(S)>0 or i,c.get_combatant(ta) if ta and c else ''}}
{{'' if i or h or (ta and c) else use_slot(S) if cast else err(f'No spell slots of Level {S} remaining.\n**{H}**')}}{{"" if h else ta.mod_hp(ceil(d/2),0) if ta and c else mod_hp(ceil(d/2),0) if cast else ""}}{{"" if h else ta.add_effect(f"{EL}",f"-resist {t}",1) if ta and c and t else c.me.add_effect(f"{EL}",f"-resist {t}",1) if cast and c and c.me and t else ""}}
-title "{{ta.N if ta and c else N}} casts {{EL}}!"
-desc "{{f"How to use this alias:\n`{H}`\nFor damage bonus:\n`!cast \'\'{EL}\'\' -dtype <damageType> -t [target]`" if h else "The spell captures some of the incoming energy, lessening its effect on you and storing it for your next melee attack. You have resistance to the triggering damage type until the start of your next turn. Also, the first time you hit with a melee attack on your next turn, the target takes extra damage of the triggering type, and the spell ends."}}"
{{"" if h or (ta and c) else f'-f "Spell Slots{"" if h or i else " (-1)"}|{"Ignored" if i else slots_str(S)}|inline"'}}
-f "{{ta.N if ta and c else N}}{{"" if h else f" (+{ceil(d/2)})"}}|{{ta.HP() if ta and c else HP()}}|inline" 
{{"" if h else f'-f "Effect|{ta.get_effect(f"{EL}") if ta else c.me.get_effect(f"{EL}") if c.me else "None"}|inline"' if c and t else ''}}
-footer "EE 150 | {{H}} | RiptideMatt" -color <color> {{'' if ta else f'-thumb {image}'}}
{{'' if h or AB else se(min(int(m),(int(S)*2)+th)) if m else se((int(S)*2)+th)}} {{'' if h or AB else f'-f "Arcane Ward THP (+{int(S)*2})|{th+int(S)*2}|inline"'}}
