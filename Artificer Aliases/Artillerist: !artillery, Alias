!artillery [summon|prot|force|flame] [-t target] (if prot)

!alias artillery {{c,ar,a,A,cc,g,esc,b,D=combat(),argparse(&ARGS&),&ARGS&[0] if &ARGS& else '',int(get('ArtificerLevel',0)),"Eldritch Cannon",load_json(get_gvar("d3aabe9e-15e6-4a9e-9512-0ae4df684f07")),'\\"','`'*3,dump_json}}{{T,P,F,S,B,v=ar.get("t") if ar.get("t") else '',"prot" in a,"flame" in a,"summon" in a,"force" in a,cc_exists(cc) and get_cc(cc)>0}}{{"multiline" if S else "embed"}} 
{{"!embed" if S else ''}}{{t,thp,s=[c.get_combatant(x) for x in T] if c and T and P else [],vroll(f"1d8+{intelligenceMod}"),ar.last('l',1,int)}}{{[x.set_thp(thp.total) for x in t] if t and P else ''}}{{(mod_cc(cc,-1) if v else use_slot(s) if get_slots(s) and not v else err(f'No spell slots of Level {s} remaining.')) if S else ''}} -title "<name> {{"summons" if S else "uses"}} their {{"Protector Cannon" if P else "Flamethrower" if F else "Force Ballista" if B else f'{cc}'}}!" -desc "{{f'{g[5]}' if P else f'''{g[1]}\n{b}{D(g[4]).replace('"', esc)}{b}''' if F else f'''{g[0]}\n{b}{D(g[3]).replace('"', esc)}{b}''' if B else f'{cc} has been summoned!' if S else f'{g[2]}'}}" {{f'-f "THP Roll|{thp}"' if P else ''}} -footer "{{"\n".join([str(x) for x in t]) if t else ""}}{{'' if S else "\n"}}!artillery [summon|prot|force|flame] [-t target] (if prot)" -color <color> -thumb <image> {{f'-f "{f"{cc}" if v else "Spell Slots"} (-1)|{cc_str(cc) if v else slots_str(s)}"' if S else ''}}
{{f'!i add 0 "{cc} ({name})" -hp {A*5} -ac 18 -immune psychic -immune poison -p 10' if S else ''}}
{{f'!i add 0 "{cc} ({name}) (2)" -hp {A*5} -ac 18 -immune psychic -immune poison -p 10' if S and A>14 else ''}}
